<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prevalence of Disaster in Jawa Barat • jabr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Prevalence of Disaster in Jawa Barat">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/jabar_disaster.html">Prevalence of Disaster in Jawa Barat</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/aswansyahputra/jabr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Prevalence of Disaster in Jawa Barat</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/aswansyahputra/jabr/blob/master/vignettes/jabar_disaster.Rmd"><code>vignettes/jabar_disaster.Rmd</code></a></small>
      <div class="hidden name"><code>jabar_disaster.Rmd</code></div>

    </div>

    
    
<p>Let’s load <code>jabr</code> package first! We also want to load <code>tidyverse</code> for data processing and visualisation.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(jabr)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; ── Attaching packages ─────────────────────────── tidyverse 1.2.1 ──</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; ✔ ggplot2 3.2.1     ✔ purrr   0.3.2</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; ✔ tibble  2.1.3     ✔ dplyr   0.8.3</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; ✔ tidyr   1.0.0     ✔ stringr 1.4.0</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt; ✔ readr   1.3.1     ✔ forcats 0.4.0</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt; ── Conflicts ────────────────────────────── tidyverse_conflicts() ──</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></a></code></pre></div>
<p>Next, let’s list the available dataset in Open Data Jawa Barat.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">jabar_tbl &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/jabr_list_dataset.html">jabr_list_dataset</a></span>()</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4">jabar_tbl</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; # A tibble: 1,565 x 4</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt;    title              provider           last_updated url                  </span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;              &lt;date&gt;       &lt;chr&gt;                </span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt;  1 PDRB ADHK di Prov… BADAN PUSAT STATI… 2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt;  2 PDRB ADHK di Prov… BADAN PUSAT STATI… 2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt;  3 PDRB ADHK di Prov… BADAN PUSAT STATI… 2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt;  4 PDRB ADHK di Prov… BADAN PUSAT STATI… 2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt;  5 PDRB ADHK di Prov… BADAN PUSAT STATI… 2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt;  6 Koperasi Aktif Be… DINAS KOPERASI DA… 2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt;  7 Luas Penanaman Po… DINAS KEHUTANAN    2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt;  8 Luas Penanaman Po… DINAS KEHUTANAN    2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt;  9 Luas Penanaman Po… DINAS KEHUTANAN    2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="co">#&gt; 10 Luas Penanaman Po… DINAS KEHUTANAN    2019-09-25   https://data.jabarpr…</span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">#&gt; # … with 1,555 more rows</span></a></code></pre></div>
<p>After viewing the list of the datasets, suppose we are interested in dataset about disaster prevalence in Jawa Barat. We will filter the data using keyword “Jumlah bencana” and fetch it into R.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">jabar_disaster_raw &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="st">  </span>jabar_tbl <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">str_detect</span>(title, <span class="st">"Jenis Bencana"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="st">  </span><span class="kw"><a href="../reference/jabr_fetch.html">jabr_fetch</a></span>()</a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6">jabar_disaster_raw</a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; # A tibble: 7 x 2</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt;   title                                                  dataset           </span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt;   &lt;chr&gt;                                                  &lt;list&gt;            </span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; 1 Jumlah Jenis Bencana Di Provinsi Jawa Barat Tahun 2012 &lt;df[,6] [156 × 6]&gt;</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; 2 Jumlah Jenis Bencana Di Provinsi Jawa Barat Tahun 2013 &lt;df[,6] [156 × 6]&gt;</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt; 3 Jumlah Jenis Bencana Di Provinsi Jawa Barat Tahun 2014 &lt;df[,6] [162 × 6]&gt;</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt; 4 Jumlah Jenis Bencana Di Provinsi Jawa Barat Tahun 2015 &lt;df[,6] [162 × 6]&gt;</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt; 5 Jumlah Jenis Bencana Di Provinsi Jawa Barat Tahun 2016 &lt;df[,6] [162 × 6]&gt;</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">#&gt; 6 Jumlah Jenis Bencana Di Provinsi Jawa Barat Tahun 2017 &lt;df[,6] [162 × 6]&gt;</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt; 7 Jumlah Jenis Bencana Di Provinsi Jawa Barat Tahun 2018 &lt;df[,6] [162 × 6]&gt;</span></a></code></pre></div>
<p>It looks like every year has same number of column, let’s check it!</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">jabar_disaster_raw <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">colnames =</span> <span class="kw">map_chr</span>(dataset, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(.x) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">                              </span>toString)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">select</span>(title, colnames)</a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; # A tibble: 7 x 2</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt;   title                           colnames                                 </span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt;   &lt;chr&gt;                           &lt;chr&gt;                                    </span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; 1 Jumlah Jenis Bencana Di Provin… provinsi, kode_kota_kabupaten, kota_kabu…</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 2 Jumlah Jenis Bencana Di Provin… provinsi, kode_kota_kabupaten, kota_kabu…</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 3 Jumlah Jenis Bencana Di Provin… provinsi, kode_kota_kabupaten, kota_kabu…</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 4 Jumlah Jenis Bencana Di Provin… provinsi, kode_kota_kabupaten, kota_kabu…</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; 5 Jumlah Jenis Bencana Di Provin… provinsi, kode_kota_kabupaten, kota_kabu…</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; 6 Jumlah Jenis Bencana Di Provin… provinsi, kode_kota_kabupaten, kota_kabu…</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; 7 Jumlah Jenis Bencana Di Provin… provinsi, kode_kota_kabupaten, kota_kabu…</span></a></code></pre></div>
<p>Now that we are sure, we can unnest the dataset. Let’s also extract the year information, select relevant columns, and perform some data cleaning steps.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">jabar_disaster &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span>jabar_disaster_raw <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">unnest</span>(<span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(dataset)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">extract</span>(title, <span class="st">"year"</span>, <span class="st">"(</span><span class="ch">\\</span><span class="st">d{4})"</span>, <span class="dt">convert =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="kw">select</span>(</a>
<a class="sourceLine" id="cb5-6" title="6">    year,</a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="dt">district_code =</span> kode_kota_kabupaten,</a>
<a class="sourceLine" id="cb5-8" title="8">    <span class="dt">district_name =</span> kota_kabupaten,</a>
<a class="sourceLine" id="cb5-9" title="9">    <span class="dt">disaster =</span> jenis_bencana,</a>
<a class="sourceLine" id="cb5-10" title="10">    <span class="dt">occurance =</span> jumlah</a>
<a class="sourceLine" id="cb5-11" title="11">  ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="st">  </span><span class="kw">mutate_if</span>(is.character, str_to_title)</a>
<a class="sourceLine" id="cb5-13" title="13"></a>
<a class="sourceLine" id="cb5-14" title="14">jabar_disaster</a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; # A tibble: 1,122 x 5</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt;     year district_code district_name      disaster         occurance</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt;    &lt;int&gt;         &lt;int&gt; &lt;chr&gt;              &lt;chr&gt;                &lt;int&gt;</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt;  1  2012          3204 Kab. Bandung       Kebakaran                3</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">#&gt;  2  2012          3204 Kab. Bandung       Banjir                  17</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt;  3  2012          3204 Kab. Bandung       Tanah Longsor           12</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">#&gt;  4  2012          3204 Kab. Bandung       Angin Topan              3</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">#&gt;  5  2012          3204 Kab. Bandung       Gempa Bumi               0</span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co">#&gt;  6  2012          3204 Kab. Bandung       Gelombang Pasang         0</span></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="co">#&gt;  7  2012          3217 Kab. Bandung Barat Kebakaran                5</span></a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">#&gt;  8  2012          3217 Kab. Bandung Barat Banjir                   2</span></a>
<a class="sourceLine" id="cb5-26" title="26"><span class="co">#&gt;  9  2012          3217 Kab. Bandung Barat Tanah Longsor            7</span></a>
<a class="sourceLine" id="cb5-27" title="27"><span class="co">#&gt; 10  2012          3217 Kab. Bandung Barat Angin Topan              2</span></a>
<a class="sourceLine" id="cb5-28" title="28"><span class="co">#&gt; # … with 1,112 more rows</span></a></code></pre></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Muhammad Aswan Syahputra.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
